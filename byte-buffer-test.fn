;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
;;; Tests for byte stream.                                  ;;;
;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;

(progn
  (def %buf (make-byte-buffer))
  (= 0 (byte-buffer-size %buf)))

(progn
  (byte-buffer-append! %buf 0)
  (byte-buffer-append! %buf 1)
  (byte-buffer-append! %buf 2)
  (byte-buffer-append! %buf 3)
  (byte-buffer-append! %buf 4)
  (byte-buffer-append! %buf 5)
  (byte-buffer-append! %buf 6)
  (byte-buffer-set! %buf 2 20)
  (eql '(0 1 20 3 4 5 6)
       (byte-buffer-slice %buf 0 7)))

(= 7 (byte-buffer-size %buf))
